
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Create a patch Â· GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-search-pro/search.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="useful_mercurial_commands.html" />
    
    
    <link rel="prev" href="setting_mercurial_environment.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../../">
            
                <a href="../../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Products</li>
        
        
    
        <li class="chapter " data-level="2.1" data-path="../../products/appstores/">
            
                <a href="../../products/appstores/">
            
                    
                    App stores
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.1.1" data-path="../../products/appstores/new_release_android.html">
            
                <a href="../../products/appstores/new_release_android.html">
            
                    
                    New Android release
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.2" data-path="../../products/appstores/new_release_ios.html">
            
                <a href="../../products/appstores/new_release_ios.html">
            
                    
                    New iOS release
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2.2" data-path="../../products/firefox_android/">
            
                <a href="../../products/firefox_android/">
            
                    
                    Firefox for Android
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.2.1" data-path="../../products/firefox_android/adding_singlelocale.html">
            
                <a href="../../products/firefox_android/adding_singlelocale.html">
            
                    
                    Single-locale builds
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2.2" data-path="../../products/firefox_android/adding_multilocales.html">
            
                <a href="../../products/firefox_android/adding_multilocales.html">
            
                    
                    Multi-locales build
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2.3" data-path="../../products/firefox_desktop/">
            
                <a href="../../products/firefox_desktop/">
            
                    
                    Firefox for Desktop
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.3.1" data-path="../../products/firefox_desktop/adding_nightly.html">
            
                <a href="../../products/firefox_desktop/adding_nightly.html">
            
                    
                    Nightly builds
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.3.2" data-path="../../products/firefox_desktop/adding_release.html">
            
                <a href="../../products/firefox_desktop/adding_release.html">
            
                    
                    Beta/Release builds
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.3.3" data-path="../../products/firefox_desktop/removing_locales.html">
            
                <a href="../../products/firefox_desktop/removing_locales.html">
            
                    
                    Removing locales
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2.4" data-path="../../products/firefox_iOS/">
            
                <a href="../../products/firefox_iOS/">
            
                    
                    Firefox for iOS
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.4.1" data-path="../../products/firefox_iOS/review_iOSstrings.html">
            
                <a href="../../products/firefox_iOS/review_iOSstrings.html">
            
                    
                    Reviewing new strings
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2.5" data-path="../../products/mozilla_org/">
            
                <a href="../../products/mozilla_org/">
            
                    
                    Mozilla.org
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.5.1" data-path="../../products/mozilla_org/working_bedrock.html">
            
                <a href="../../products/mozilla_org/working_bedrock.html">
            
                    
                    Working with Bedrock
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.5.2" data-path="../webdashboards/import_translations.html">
            
                <a href="../webdashboards/import_translations.html">
            
                    
                    Importing translations
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.5.3" data-path="../../products/mozilla_org/updating_mozillaorg_production.html">
            
                <a href="../../products/mozilla_org/updating_mozillaorg_production.html">
            
                    
                    Updating production
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.5.4" data-path="../../products/mozilla_org/enable_production.html">
            
                <a href="../../products/mozilla_org/enable_production.html">
            
                    
                    New locales
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2.6" data-path="../../products/searchplugins/setup_searchplugins.html">
            
                <a href="../../products/searchplugins/setup_searchplugins.html">
            
                    
                    Searchplugins
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Tools</li>
        
        
    
        <li class="chapter " data-level="3.1" data-path="../pontoon/">
            
                <a href="../pontoon/">
            
                    
                    Pontoon
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.1.1" data-path="../pontoon/adding_new_project.html">
            
                <a href="../pontoon/adding_new_project.html">
            
                    
                    New project
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.2" data-path="../pontoon/adding_new_locale.html">
            
                <a href="../pontoon/adding_new_locale.html">
            
                    
                    New locale
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.3" data-path="../pontoon/sending_notifications.html">
            
                <a href="../pontoon/sending_notifications.html">
            
                    
                    Notifications
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.4" data-path="../pontoon/renaming_a_file.html">
            
                <a href="../pontoon/renaming_a_file.html">
            
                    
                    Renaming a localization file
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3.2" data-path="../stores_l10n/">
            
                <a href="../stores_l10n/">
            
                    
                    Stores webapp
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.2.1" data-path="../stores_l10n/overview.html">
            
                <a href="../stores_l10n/overview.html">
            
                    
                    Overview
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.2.2" data-path="../stores_l10n/add_new_product.html">
            
                <a href="../stores_l10n/add_new_product.html">
            
                    
                    New product
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3.3" data-path="../webdashboards/">
            
                <a href="../webdashboards/">
            
                    
                    Web dashboards
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.3.1" data-path="../webdashboards/langchecker.html">
            
                <a href="../webdashboards/langchecker.html">
            
                    
                    Langchecker
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.3.2" data-path="../webdashboards/webdashboard.html">
            
                <a href="../webdashboards/webdashboard.html">
            
                    
                    Webdashboard
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.3.3" data-path="../webdashboards/bootstrap_new_locale.html">
            
                <a href="../webdashboards/bootstrap_new_locale.html">
            
                    
                    Bootstrap a new locale
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.3.4" data-path="../webdashboards/add_locales.html">
            
                <a href="../webdashboards/add_locales.html">
            
                    
                    Add locales to an existing file
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.3.5" data-path="../webdashboards/update_existing_file.html">
            
                <a href="../webdashboards/update_existing_file.html">
            
                    
                    Update an existing file
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.3.6" data-path="../webdashboards/add_new_file.html">
            
                <a href="../webdashboards/add_new_file.html">
            
                    
                    Add a new file to an existing project
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="header">Misc</li>
        
        
    
        <li class="chapter " data-level="4.1" data-path="./">
            
                <a href="./">
            
                    
                    Mercurial
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="4.1.1" data-path="setting_mercurial_environment.html">
            
                <a href="setting_mercurial_environment.html">
            
                    
                    Set up the environment
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="4.1.2" data-path="creating_mercurial_patch.html">
            
                <a href="creating_mercurial_patch.html">
            
                    
                    Create a patch
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.3" data-path="useful_mercurial_commands.html">
            
                <a href="useful_mercurial_commands.html">
            
                    
                    Useful Mercurial commands
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="4.2" data-path="../../misc/">
            
                <a href="../../misc/">
            
                    
                    Other docs
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="4.2.1" data-path="../../misc/creating_new_repository.html">
            
                <a href="../../misc/creating_new_repository.html">
            
                    
                    New l10n repository
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.2.2" data-path="../../misc/working_w_l10n_agency.html">
            
                <a href="../../misc/working_w_l10n_agency.html">
            
                    
                    How to work with a Localization Agency
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.2.3" data-path="../../misc/documentation_styleguide.html">
            
                <a href="../../misc/documentation_styleguide.html">
            
                    
                    Documentation styleguide
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.2.4" data-path="../../misc/stock_emails.html">
            
                <a href="../../misc/stock_emails.html">
            
                    
                    Stock emails
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.2.5" data-path="../../config/setup_l10ndrivers_vm.html">
            
                <a href="../../config/setup_l10ndrivers_vm.html">
            
                    
                    L10n-drivers VM setup
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../.." >Create a patch</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="create-a-patch-in-mercurial">Create a patch in Mercurial</h1>
<p>There are currently two different methods available to create a patch for Mercurial repositories:</p>
<ul>
<li><a href="#creating-a-patch-using-mozreview">Using <strong>MozReview</strong></a>.</li>
<li><a href="#creating-a-patch-using-queues">Using <strong>Mercurial Queues</strong></a> (<code>mq</code> extension).</li>
</ul>
<p>MozReview is the preferred method for patches to main code repositories, like <code>mozilla-central</code>. On the other hand, Queues is the only tool available for patches to l10n repositories.</p>
<p>As a general rule, before creating a patch, make sure that your environment is <a href="setting_mercurial_environment.html">correctly set up</a>, and update your local clones.</p>
<h2 id="creating-a-patch-using-mozreview">Creating a patch using MozReview</h2>
<h3 id="creating-a-patch">Creating a patch</h3>
<p>Consider the following example: setting up productization for Urdu (ur) on Firefox desktop. After you&#x2019;ve created or edited all the files you need, check the status of the repository.</p>
<pre><code class="lang-BASH">$ hg status
M browser/locales/search/list.json
? browser/locales/searchplugins/amazon-in.xml
? browser/locales/searchplugins/wikipedia-ur.xml
</code></pre>
<p>These are all status codes relevant for working with patches:</p>
<ul>
<li>M = modified. File was already tracked but has been modified.</li>
<li>A = added. File is new and was already added with <code>hg add</code>.</li>
<li>R = removed. File has been removed with <code>hg remove</code>.</li>
<li>! = missing. File has been removed from the filesystem but it&#x2019;s still tracked. Use <code>hg remove</code> to stop tracking it.</li>
<li>? = not tracked. File is not tracked yet. You can start tracking it by using <code>hg add</code>.</li>
</ul>
<p>Note that the file status will change once you commit, <code>hg status</code> only shows information about pending changes.</p>
<p>Now you need to add the new files. You can add them using the full path, or a parent folder, just make sure you&#x2019;re not adding unnecessary files.</p>
<pre><code class="lang-BASH">$ hg add browser/locales/searchplugins
$ hg status
M browser/locales/search/list.json
A browser/locales/searchplugins/amazon-in.xml
A browser/locales/searchplugins/wikipedia-ur.xml
</code></pre>
<p>Let&#x2019;s create a bookmark for this pending work, for example <code>bug1304757</code>.</p>
<pre><code class="lang-BASH">$ hg bookmark bug1304757
</code></pre>
<p>Commit the changes with a commit message that includes the reviewer&#x2019;s nickname after <code>r?</code>, for example if flod is the reviewer:</p>
<pre><code class="lang-BASH">$ hg commit -m <span class="hljs-string">&quot;Bug 1304757 - [ur] Search engine setup for Firefox for Urdu, r?flod&quot;</span>
</code></pre>
<p>At this point you can check the status of the tree:</p>
<pre><code class="lang-BASH">$ hg wip
</code></pre>
<p>And you should be able to identify your work and bookmark (press <code>q</code> to leave this view):</p>
<pre><code>@   358728:c0b04112d4e6 flod tip  bug1304757
|  Bug 1304757 - [ur] Search engine setup for Firefox for Urdu, r?flod
| o   358726:f7834b7b4050 aosmond  inbound
|/:  Bug 1299498 - Keep a main thread only pointer to the underlying nsIURI for ImageURL. r=tnikkel
| : o   358715:6f79cece26e9 ffxbld  beta
| : |  No bug, Automated blocklist update from host bld-linux64-spot-245 - a=blocklist-update
| : ~
| : o   358714:f5f73390f439 ffxbld  release
| : |  No bug, Automated blocklist update from host bld-linux64-spot-246 - a=blocklist-update
| : ~
o :   358709:f8107cf96144 cbook  central
:/   merge mozilla-inbound to mozilla-central a=merge
</code></pre><p>Push to review with:</p>
<pre><code class="lang-BASH">$ hg push review
</code></pre>
<p>At the end of the process, press enter or type <code>y</code> to publish your review.</p>
<pre><code>publish these review requests now (Yn)?  y
(published review request XXXX)
</code></pre><p>Once published, the review request will be attached automatically to the bug, and the reviewer will be flagged.</p>
<h3 id="updating-an-existing-patch">Updating an existing patch</h3>
<p>If you need to address review comments, you can restore your branch by switching to your bookmark, and start working on it again.</p>
<pre><code class="lang-BASH">$ hg up bug1304757
</code></pre>
<p>You can check which bookmark is currently active with <code>hg bookmarks</code>:</p>
<pre><code class="lang-BASH">$ hg bookmarks
   aurora                    359014:96503957841c
   beta                      359025:34c73c520f93
 * bug1304757                359034:bde380bc54ff
   central                   358999:a69583d2dbc6
</code></pre>
<p>Make your changes and commit them</p>
<pre><code class="lang-BASH">$ hg commit -m <span class="hljs-string">&quot;Address review comments&quot;</span>
</code></pre>
<p>Then squash the commit together:</p>
<pre><code class="lang-BASH">$ hg histedit
</code></pre>
<p>The following screen will look like this:</p>
<pre><code>pick f6f70f6de69c 358597 Bug 123456 - [ur] Search engine setup for Firefox fo...
pick 8088fd8658fd 358598 Fix searchplugin name

# Edit history between f6f70f6de69c and 8088fd8658fd
#
# Commits are listed from least to most recent
#
# You can reorder changesets by reordering the lines
#
# Commands:
#
#  e, edit = use commit, but stop for amending
#  m, mess = edit commit message without changing commit content
#  p, pick = use commit
#  d, drop = remove commit from history
#  f, fold = use commit, but combine it with the one above
#  r, roll = like fold, but discard this commit&apos;s description
#
</code></pre><p>In this case you want to <em>roll</em> the second commit into the first one, so replace <code>pick</code> with <code>roll</code> (or <code>r</code>), save with <code>CTRL+O</code> and exit with <code>CTRL+X</code> (assuming the default editor is nano).</p>
<pre><code>pick f6f70f6de69c 358597 Bug 123456 - [ur] Search engine setup for Firefox fo...
roll 8088fd8658fd 358598 Fix searchplugin name

...
</code></pre><p>Push again to MozReview</p>
<pre><code class="lang-BASH">$ hg push review
</code></pre>
<p>You can also use <code>hg histedit</code> to reword a commit message (set the commit line to <code>edit</code>). Just remember to complete the <code>histedit</code> after commit.</p>
<pre><code class="lang-BASH">$ hg commit -m <span class="hljs-string">&quot;Some changes&quot;</span>
$ hg histedit --continue
</code></pre>
<p>If necessary, you can rebase against another bookmark, like <code>central</code> or <code>inbound</code></p>
<pre><code class="lang-BASH">$ hg rebase <span class="hljs-_">-d</span> central
</code></pre>
<p>More information about this workflow are available in the following pages:</p>
<ul>
<li><a href="https://mozilla-version-control-tools.readthedocs.io/en/latest/hgmozilla/firefoxworkflow.html" target="_blank">https://mozilla-version-control-tools.readthedocs.io/en/latest/hgmozilla/firefoxworkflow.html</a></li>
<li><a href="https://www.mercurial-scm.org/wiki/Bookmarks" target="_blank">https://www.mercurial-scm.org/wiki/Bookmarks</a></li>
</ul>
<h3 id="landing-the-patch">Landing the patch</h3>
<p>Once the patch has been reviewed, you have two options:</p>
<ul>
<li>If you have L3 access to the repository, you can use Autoland to land your commit directly from MozReview. If your reviewer has it, you can ask them to land.</li>
<li>You can set the <code>checkin-needed</code> keyword in the bug, and sheriffs will land it from you.</li>
</ul>
<h2 id="creating-a-patch-using-queues">Creating a patch using Queues</h2>
<h3 id="creating-a-patch">Creating a patch</h3>
<p>Consider the following example: setting up productization for Urdu (ur) on Firefox desktop (l10n repository). The first step is to create a <code>region.properties</code> file. Move into the repository folder and check its status:</p>
<pre><code class="lang-BASH">$ <span class="hljs-built_in">cd</span> ~/mozilla/mercurial/l10n/ur/l10n-central

$ hg status
? browser/chrome/browser-region/region.properties
</code></pre>
<p>File is brand new and needs to be added:</p>
<pre><code class="lang-BASH">$ hg add browser

$ hg status
A browser/chrome/browser-region/region.properties
</code></pre>
<p>You need to assign a name to this patch, it&#x2019;s easy to use a reference to the bug number: for example, if the bug number is 123456, the file could be called <code>bug123456.patch</code> (note the added extension <code>.patch</code>).</p>
<pre><code class="lang-BASH">$ hg qnew bug123456.patch
</code></pre>
<p>At this point you will be asked to provide a commit message for your patch (in <code>nano</code> if you followed the instructions to set up the environment): write your commit message, then press <code>CTRL+O</code> to save the file, <code>enter</code> to confirm the proposed filename, and finally <code>CTRL+X</code> to exit the editor.</p>
<p>The commit message should be the same as the bug, for example <code>Bug 123456 - Set up searchplugins for &quot;ur&quot; and Firefox desktop</code>.</p>
<p>You&#x2019;ready to <em>pop</em> the patch out of the queue. Since it&#x2019;s likely that there are no other patches, you can pop them all with <code>-a</code>.</p>
<pre><code class="lang-BASH">$ hg qpop <span class="hljs-_">-a</span>
popping bug123456.patch
patch queue now empty
</code></pre>
<p>The patch is stored inside the <code>.hg/patches</code> folder in the root of the repository (in the suggested setup, the full path would be <code>~/mozilla/mercurial/l10n-central/.hg/patches</code>). You can copy the file through the command line or the file explorer. For example, on macOS you can open the folder in Finder by typing:</p>
<pre><code class="lang-BASH">$ open ~/mozilla/mercurial/l10n/ur/l10n-central/.hg/patches
</code></pre>
<p>Or you can copy the file on the Desktop with</p>
<pre><code class="lang-BASH">$ cp ~/mozilla/mercurial/l10n/ur/l10n-central/.hg/patches/bug123456.patch ~/Desktop
</code></pre>
<p>Now you need to attach the file to Bugzilla and set an appropriate reviewer for it.</p>
<h3 id="updating-an-existing-patch">Updating an existing patch</h3>
<p>Let&#x2019;s assume that the review found some issues with the patch and you need to update it. The fastest way is to import the .patch file without committing, update the files as needed, and create a new patch using the same process explained above.</p>
<p>Assuming the file is called <code>bug123456.patch</code> and it&#x2019;s in your desktop, you can move in the repository folder and import the file like this:</p>
<pre><code class="lang-BASH">$ <span class="hljs-built_in">cd</span> ~/mozilla/mercurial/l10n/ur/l10n-central

$ hg import --no-commit ~/Desktop/bug123456.patch
</code></pre>
<p>Don&#x2019;t forget the <code>--no-commit</code> part. If you do, the patch will be added to your repository and you&#x2019;ll need to clone the original repository again.</p>
<!-- markdownlint-disable MD038 -->
<p><strong>Note:</strong> You can drag and drop the patch file on the terminal on macOS to get its full path instead of typing it. In other words, type <code>hg import --no-commit</code> (leave an empty space at the end), then drag the icon of the patch on the Terminal&#x2019;s window: its full path will appear automatically.
<!-- markdownlint-enable MD038 --></p>
<p>At this point you&#x2019;re ready to modify the files, and create a new patch. The only difference is that you will need to use a different filename, for example <code>bug123456v1.patch</code>.</p>
<h3 id="landing-the-patch">Landing the patch</h3>
<p>Your patch got a <code>r+</code>, so you need to update the commit message to reference the review, import the patch and push it to the remote server.</p>
<p><strong>Note:</strong> If the patch is for a repository where you don&#x2019;t have write access, you don&#x2019;t need to follow these instructions, only to set the <code>checkin-needed</code> flag in Bugzilla.</p>
<p>Open the .patch file in your editor, find the line with the commit message, and add <code>r=NICKNAME</code> to the commit message. For example, the last line in</p>
<pre><code># HG changeset patch
# User SOMENAME &lt;SOME EMAIL&gt;
# Parent  b45d23bc53df9227aa262acb2a5c6b0ab903b76e
Bug 123456 - Set up searchplugins for &quot;ur&quot; and Firefox for Android
</code></pre><p>Should become like this, assuming flod is the reviewer.</p>
<pre><code>Bug 123456 - Set up searchplugins for &quot;ur&quot; and Firefox for Android, r=flod
</code></pre><p>Then you need to import the patch, this time without the <code>no-commit</code> parameter.</p>
<pre><code class="lang-BASH">$ <span class="hljs-built_in">cd</span> ~/mozilla/mercurial/l10n/ur/l10n-central

$ hg import ~/Desktop/bug123456.patch
</code></pre>
<p>The patch has been imported and committed. If you get an error while applying the patch, check if the editor you&#x2019;re using hasn&#x2019;t modified other lines of the patch, for example removing trailing whitespaces. In that case, using <code>nano</code> to edit the patch is probably your faster option.</p>
<p>Now you&#x2019;re ready to push to the remote repository</p>
<pre><code class="lang-BASH">$ hg push
</code></pre>
<p>The reply from the server will contain the URL to your changeset: copy and paste that URL in the bug and close it.</p>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="setting_mercurial_environment.html" class="navigation navigation-prev " aria-label="Previous page: Set up the environment">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="useful_mercurial_commands.html" class="navigation navigation-next " aria-label="Next page: Useful Mercurial commands">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Create a patch","level":"4.1.2","depth":2,"next":{"title":"Useful Mercurial commands","level":"4.1.3","depth":2,"path":"tools/mercurial/useful_mercurial_commands.md","ref":"tools/mercurial/useful_mercurial_commands.md","articles":[]},"previous":{"title":"Set up the environment","level":"4.1.1","depth":2,"path":"tools/mercurial/setting_mercurial_environment.md","ref":"tools/mercurial/setting_mercurial_environment.md","articles":[]},"dir":"ltr"},"config":{"gitbook":"*","theme":"default","variables":{},"plugins":["-lunr","-search","search-pro"],"pluginsConfig":{"search-pro":{},"highlight":{},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"}},"file":{"path":"tools/mercurial/creating_mercurial_patch.md","mtime":"2017-09-22T11:05:03.654Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2017-09-22T11:06:05.597Z"},"basePath":"../..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../../gitbook/gitbook.js"></script>
    <script src="../../gitbook/theme.js"></script>
    
        
        <script src="../../gitbook/gitbook-plugin-search-pro/jquery.mark.min.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-search-pro/search.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>


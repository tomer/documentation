
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Searchplugins Â· GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-search-pro/search.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="../../tools/pontoon/" />
    
    
    <link rel="prev" href="../mozilla_org/enable_production.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../../">
            
                <a href="../../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Products</li>
        
        
    
        <li class="chapter " data-level="2.1" data-path="../appstores/">
            
                <a href="../appstores/">
            
                    
                    App stores
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.1.1" data-path="../appstores/new_release_android.html">
            
                <a href="../appstores/new_release_android.html">
            
                    
                    New Android release
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.2" data-path="../appstores/new_release_ios.html">
            
                <a href="../appstores/new_release_ios.html">
            
                    
                    New iOS release
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2.2" data-path="../firefox_android/">
            
                <a href="../firefox_android/">
            
                    
                    Firefox for Android
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.2.1" data-path="../firefox_android/adding_singlelocale.html">
            
                <a href="../firefox_android/adding_singlelocale.html">
            
                    
                    Single-locale builds
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2.2" data-path="../firefox_android/adding_multilocales.html">
            
                <a href="../firefox_android/adding_multilocales.html">
            
                    
                    Multi-locales build
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2.3" data-path="../firefox_desktop/">
            
                <a href="../firefox_desktop/">
            
                    
                    Firefox for Desktop
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.3.1" data-path="../firefox_desktop/adding_nightly.html">
            
                <a href="../firefox_desktop/adding_nightly.html">
            
                    
                    Nightly builds
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.3.2" data-path="../firefox_desktop/adding_release.html">
            
                <a href="../firefox_desktop/adding_release.html">
            
                    
                    Beta/Release builds
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.3.3" data-path="../firefox_desktop/removing_locales.html">
            
                <a href="../firefox_desktop/removing_locales.html">
            
                    
                    Removing locales
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2.4" data-path="../firefox_iOS/">
            
                <a href="../firefox_iOS/">
            
                    
                    Firefox for iOS
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.4.1" data-path="../firefox_iOS/review_iOSstrings.html">
            
                <a href="../firefox_iOS/review_iOSstrings.html">
            
                    
                    Reviewing new strings
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2.5" data-path="../mozilla_org/">
            
                <a href="../mozilla_org/">
            
                    
                    Mozilla.org
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.5.1" data-path="../mozilla_org/working_bedrock.html">
            
                <a href="../mozilla_org/working_bedrock.html">
            
                    
                    Working with Bedrock
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.5.2" data-path="../../tools/webdashboards/import_translations.html">
            
                <a href="../../tools/webdashboards/import_translations.html">
            
                    
                    Importing translations
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.5.3" data-path="../mozilla_org/updating_mozillaorg_production.html">
            
                <a href="../mozilla_org/updating_mozillaorg_production.html">
            
                    
                    Updating production
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.5.4" data-path="../mozilla_org/enable_production.html">
            
                <a href="../mozilla_org/enable_production.html">
            
                    
                    New locales
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter active" data-level="2.6" data-path="setup_searchplugins.html">
            
                <a href="setup_searchplugins.html">
            
                    
                    Searchplugins
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Tools</li>
        
        
    
        <li class="chapter " data-level="3.1" data-path="../../tools/pontoon/">
            
                <a href="../../tools/pontoon/">
            
                    
                    Pontoon
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.1.1" data-path="../../tools/pontoon/adding_new_project.html">
            
                <a href="../../tools/pontoon/adding_new_project.html">
            
                    
                    New project
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.2" data-path="../../tools/pontoon/adding_new_locale.html">
            
                <a href="../../tools/pontoon/adding_new_locale.html">
            
                    
                    New locale
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.3" data-path="../../tools/pontoon/sending_notifications.html">
            
                <a href="../../tools/pontoon/sending_notifications.html">
            
                    
                    Notifications
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.4" data-path="../../tools/pontoon/renaming_a_file.html">
            
                <a href="../../tools/pontoon/renaming_a_file.html">
            
                    
                    Renaming a localization file
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3.2" data-path="../../tools/stores_l10n/">
            
                <a href="../../tools/stores_l10n/">
            
                    
                    Stores webapp
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.2.1" data-path="../../tools/stores_l10n/overview.html">
            
                <a href="../../tools/stores_l10n/overview.html">
            
                    
                    Overview
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.2.2" data-path="../../tools/stores_l10n/add_new_product.html">
            
                <a href="../../tools/stores_l10n/add_new_product.html">
            
                    
                    New product
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3.3" data-path="../../tools/webdashboards/">
            
                <a href="../../tools/webdashboards/">
            
                    
                    Web dashboards
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.3.1" data-path="../../tools/webdashboards/langchecker.html">
            
                <a href="../../tools/webdashboards/langchecker.html">
            
                    
                    Langchecker
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.3.2" data-path="../../tools/webdashboards/webdashboard.html">
            
                <a href="../../tools/webdashboards/webdashboard.html">
            
                    
                    Webdashboard
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.3.3" data-path="../../tools/webdashboards/bootstrap_new_locale.html">
            
                <a href="../../tools/webdashboards/bootstrap_new_locale.html">
            
                    
                    Bootstrap a new locale
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.3.4" data-path="../../tools/webdashboards/add_locales.html">
            
                <a href="../../tools/webdashboards/add_locales.html">
            
                    
                    Add locales to an existing file
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.3.5" data-path="../../tools/webdashboards/update_existing_file.html">
            
                <a href="../../tools/webdashboards/update_existing_file.html">
            
                    
                    Update an existing file
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.3.6" data-path="../../tools/webdashboards/add_new_file.html">
            
                <a href="../../tools/webdashboards/add_new_file.html">
            
                    
                    Add a new file to an existing project
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="header">Misc</li>
        
        
    
        <li class="chapter " data-level="4.1" data-path="../../tools/mercurial/">
            
                <a href="../../tools/mercurial/">
            
                    
                    Mercurial
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="4.1.1" data-path="../../tools/mercurial/setting_mercurial_environment.html">
            
                <a href="../../tools/mercurial/setting_mercurial_environment.html">
            
                    
                    Set up the environment
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.2" data-path="../../tools/mercurial/creating_mercurial_patch.html">
            
                <a href="../../tools/mercurial/creating_mercurial_patch.html">
            
                    
                    Create a patch
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.3" data-path="../../tools/mercurial/useful_mercurial_commands.html">
            
                <a href="../../tools/mercurial/useful_mercurial_commands.html">
            
                    
                    Useful Mercurial commands
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="4.2" data-path="../../misc/">
            
                <a href="../../misc/">
            
                    
                    Other docs
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="4.2.1" data-path="../../misc/creating_new_repository.html">
            
                <a href="../../misc/creating_new_repository.html">
            
                    
                    New l10n repository
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.2.2" data-path="../../misc/working_w_l10n_agency.html">
            
                <a href="../../misc/working_w_l10n_agency.html">
            
                    
                    How to work with a Localization Agency
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.2.3" data-path="../../misc/documentation_styleguide.html">
            
                <a href="../../misc/documentation_styleguide.html">
            
                    
                    Documentation styleguide
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.2.4" data-path="../../misc/stock_emails.html">
            
                <a href="../../misc/stock_emails.html">
            
                    
                    Stock emails
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.2.5" data-path="../../config/setup_l10ndrivers_vm.html">
            
                <a href="../../config/setup_l10ndrivers_vm.html">
            
                    
                    L10n-drivers VM setup
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../.." >Searchplugins</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="set-up-searchplugins">Set up searchplugins</h1>
<h2 id="cloningupdating-the-locales-repository">Cloning/Updating the locale&#x2019;s repository</h2>
<p>You will be working on l10n-central for a new locale, and you need this locale&#x2019;s Mercurial repository on your computer.</p>
<p>l10n repositories for Firefox live in <a href="https://hg.mozilla.org/l10n-central/" target="_blank">https://hg.mozilla.org/l10n-central/</a>. In this case let&#x2019;s assume that l10n clones will be stored in <code>~/mozilla/mercurial/l10n</code>, with a subfolder for each locale and each branch. So, if the locale is <code>ur</code>, the repository will be stored in <code>~/mozilla/mercurial/l10n/ur/l10n-central</code>.</p>
<pre><code class="lang-BASH">$ mkdir -p ~/mozilla/mercurial/l10n/ur
$ <span class="hljs-built_in">cd</span> ~/mozilla/mercurial/l10n/ur
</code></pre>
<p>The first command makes sure that the path for <code>ur</code> exists, the second moves into the folder.</p>
<p>If you don&#x2019;t have a clone yet, you need to create it.</p>
<pre><code class="lang-BASH">$ hg <span class="hljs-built_in">clone</span> ssh://hg.mozilla.org/l10n-central/ur l10n-central
</code></pre>
<p>A couple of details to note in this <code>hg clone</code> command:</p>
<ul>
<li>The command uses <code>ssh://</code>, which means you need an active (and <a href="../../tools/mercurial/setting_mercurial_environment.html">properly configured</a>) SSH access to the repository.</li>
<li>It doesn&#x2019;t use the default folder for the local clone, but specify a <code>l10n-central</code> directory. Without that it would create a <code>ur</code> folder, making it impossible to distinguish different branches.</li>
</ul>
<p>At this point there&#x2019;s a clone stored in <code>~/mozilla/mercurial/l10n/ur/l10n-central</code> (remember that you already moved to <code>~/mozilla/mercurial/l10n/ur</code> before running <code>hg clone</code>).</p>
<p>If you already have a clone on your computer, always make sure to update it before doing anything:</p>
<pre><code class="lang-BASH">$ <span class="hljs-built_in">cd</span> ~/mozilla/mercurial/l10n/ur/l10n-central
$ hg pull -r default -u
</code></pre>
<h2 id="setting-up-files-for-mozilla-unified">Setting up files for mozilla-unified</h2>
<p>First of all make sure that your environment is <a href="../../tools/mercurial/setting_mercurial_environment.html">correctly set up</a>, and update your local mozilla-unified clone to be in sync with central:</p>
<pre><code class="lang-BASH">$ <span class="hljs-built_in">cd</span> ~/mozilla/mercurial/mozilla-unified
$ hg pull -u
$ hg up central
</code></pre>
<h3 id="listjson">list.json</h3>
<p>The list of searchplugins is stored in JSON format:</p>
<ul>
<li>For Firefox desktop in <a href="https://hg.mozilla.org/mozilla-central/file/default/browser/locales/search/list.json" target="_blank">/browser/locales/search/list.json</a>.</li>
<li>For Firefox for Android in <a href="https://hg.mozilla.org/mozilla-central/file/default/mobile/locales/search/list.json" target="_blank">/mobile/locales/search/list.json</a>.</li>
</ul>
<p>The basic structure for each locale is fairly simple. Assuming the locale code is <code>ur</code>, it will have a <code>default</code> key, with <code>visibleDefaultEngines</code>.</p>
<pre><code class="lang-JSON"><span class="hljs-string">&quot;ur&quot;</span>: {
  <span class="hljs-string">&quot;default&quot;</span>: {
    <span class="hljs-string">&quot;visibleDefaultEngines&quot;</span>: [
      <span class="hljs-string">&quot;google&quot;</span>, <span class="hljs-string">&quot;yahoo-in&quot;</span>, <span class="hljs-string">&quot;bing&quot;</span>, <span class="hljs-string">&quot;amazon-in&quot;</span>, <span class="hljs-string">&quot;ddg&quot;</span>, <span class="hljs-string">&quot;wikipedia-ur&quot;</span>
    ]
  }
},
</code></pre>
<p>Notes about the list:</p>
<ul>
<li>If the searchplugin XML file is called <code>google.xml</code>, the item to add in list.json will be only <code>google</code>, without the extension but also <strong>respecting the case</strong>.</li>
<li>Order should reflect the actual order of searchplugins: if Google is default, Yahoo 2nd, and Bing 3rd, the list should start with <code>&quot;google&quot;, &quot;yahoo&quot;, &quot;bing&quot;</code>. The remaining searchplugins can be in alphabetical order. The actual order in the browser is currently still determined by region.properties, but at some point that file will be removed.</li>
<li>If a locale is missing from list.json, it will fall back to <code>default</code>, defined at the beginning of the file.</li>
</ul>
<p>Some locales might have a more complex definition, with searchplugins changing based on the region.</p>
<pre><code class="lang-JSON"><span class="hljs-string">&quot;zh-TW&quot;</span>: {
  <span class="hljs-string">&quot;default&quot;</span>: {
    <span class="hljs-string">&quot;visibleDefaultEngines&quot;</span>: [
      <span class="hljs-string">&quot;yahoo-zh-TW&quot;</span>, <span class="hljs-string">&quot;google&quot;</span>, <span class="hljs-string">&quot;ddg&quot;</span>, <span class="hljs-string">&quot;findbook-zh-TW&quot;</span>, <span class="hljs-string">&quot;wikipedia-zh-TW&quot;</span>, <span class="hljs-string">&quot;yahoo-zh-TW-HK&quot;</span>, <span class="hljs-string">&quot;yahoo-bid-zh-TW&quot;</span>, <span class="hljs-string">&quot;yahoo-answer-zh-TW&quot;</span>
    ]
  },
  <span class="hljs-string">&quot;TW&quot;</span>: {
    <span class="hljs-string">&quot;visibleDefaultEngines&quot;</span>: [
      <span class="hljs-string">&quot;yahoo-zh-TW&quot;</span>, <span class="hljs-string">&quot;google-nocodes&quot;</span>, <span class="hljs-string">&quot;ddg&quot;</span>, <span class="hljs-string">&quot;findbook-zh-TW&quot;</span>, <span class="hljs-string">&quot;wikipedia-zh-TW&quot;</span>, <span class="hljs-string">&quot;yahoo-zh-TW-HK&quot;</span>, <span class="hljs-string">&quot;yahoo-bid-zh-TW&quot;</span>, <span class="hljs-string">&quot;yahoo-answer-zh-TW&quot;</span>
    ]
  },
  <span class="hljs-string">&quot;HK&quot;</span>: {
    <span class="hljs-string">&quot;visibleDefaultEngines&quot;</span>: [
      <span class="hljs-string">&quot;yahoo-zh-TW-HK&quot;</span>, <span class="hljs-string">&quot;google-nocodes&quot;</span>, <span class="hljs-string">&quot;ddg&quot;</span>, <span class="hljs-string">&quot;findbook-zh-TW&quot;</span>, <span class="hljs-string">&quot;wikipedia-zh-TW&quot;</span>, <span class="hljs-string">&quot;yahoo-zh-TW&quot;</span>, <span class="hljs-string">&quot;yahoo-bid-zh-TW&quot;</span>, <span class="hljs-string">&quot;yahoo-answer-zh-TW&quot;</span>
    ]
  }
}
</code></pre>
<p>To make sure you&#x2019;re not creating a broken JSON, you can test the final content with an online validator like <a href="https://jsonlint.com/" target="_blank">jsonlint</a>.</p>
<h3 id="xml-files">XML files</h3>
<p>Searchplugins are stored:</p>
<ul>
<li>For Firefox desktop in <a href="https://hg.mozilla.org/mozilla-central/file/default/browser/locales/searchplugins" target="_blank">/browser/locales/searchplugins</a>.</li>
<li>For Firefox for Android in <a href="https://hg.mozilla.org/mozilla-central/file/default/mobile/locales/searchplugins" target="_blank">/mobile/locales/searchplugins</a>.</li>
</ul>
<p>For other searchplugins you will need to create the .xml file yourself, with some general rules to keep in mind:</p>
<ul>
<li>Always have a MPL2 license header at the beginning.</li>
<li>On desktop icons are currently square 16px and 32px, both embedded in a multilayer <code>.ico</code> file.</li>
<li>On Android icons are currently 96px transparent PNG images, with rounded corners (radius 6px), preferably with a colored background since the UI is white, and a white background wouldn&#x2019;t show the rounded corners.</li>
<li>Check if other locales already ship the same searchplugin, and copy their XML file to use as a base. If the searchplugin is brand new, it needs to be approved by BD and it will take some time, so it might be worth starting with a shorter list of searchplugins, and consider the new one in a follow-up bug. Icons will also be provided by the search provider after approval.</li>
</ul>
<h4 id="icons">Icons</h4>
<p>These are some useful tips to deal with new icons for searchplugins:</p>
<ul>
<li>If the image is a PNG (for Android), make sure to optimize it before encoding it to base64 (for example using <a href="https://tinypng.com/" target="_blank">tinypng.com</a>).</li>
<li>You can create an <code>.ico</code> file starting from separate 16px and 32px PNG icons. Create a 32px image in <a href="https://www.gimp.org/" target="_blank">Gimp</a>, add each icon to a separate layer, and export the file as <code>.ico</code> (make sure to select the option to compress each of the layers).</li>
<li>You can use online services (like <a href="http://freeonlinetools24.com/base64-image" target="_blank">this one</a>) to quickly encode an image to base64.</li>
<li>You can test the image in the browser (copy and paste the data URI in the address bar). You will still have to download it to check that everything looks good, since only one image will be displayed for multilayer <code>.ico</code> files, and transparency is quite confusing in Firefox preview.</li>
</ul>
<h4 id="wikipedia">Wikipedia</h4>
<p><strong>URLs:</strong> If you copy the .xml file from another locale (en-US is always the best choice for Wikipedia), make sure to update all URLs. If the URL for English starts with <code>en.wikipedia.</code>, for <code>ur</code> it should start with <code>ur.wikipedia.</code> (check if the domain actually exists).</p>
<p><strong>Search template:</strong> There&#x2019;s one special URL to keep in mind, in English it&#x2019;s <a href="https://en.wikipedia.org/wiki/Special:Search" target="_blank">https://en.wikipedia.org/wiki/Special:Search</a>
It&#x2019;s particular because the last part changes according to the locale, just try replacing the domain first from <code>en.</code> to <code>ur.</code>: <a href="https://ur.wikipedia.org/wiki/Special:Search" target="_blank">https://ur.wikipedia.org/wiki/Special:Search</a>
You&#x2019;ll notice that it redirects to <code>https://ur.wikipedia.org/wiki/&#x62E;&#x627;&#x635;:&#x62A;&#x644;&#x627;&#x634;</code> and that&#x2019;s the URL you need to use in the .xml file.</p>
<p>You can&#x2019;t copy the full URL from the address bar since it will encode UTF-8 characters, e.g. <code>https://ur.wikipedia.org/wiki/%D8%AE%D8%A7%D8%B5:%D8%AA%D9%84%D8%A7%D8%B4</code>, so it&#x2019;s faster to just copy only part of the URL and fixing the rest by hand.</p>
<p><strong>Description:</strong> You will need localizers to provide the translation for <code>Wikipedia, the Free Encyclopedia</code>.</p>
<p><strong>shortName:</strong> In the .xml file there&#x2019;s an attribute called <code>shortName</code>. For English is:</p>
<pre><code class="lang-XML"><span class="hljs-tag">&lt;<span class="hljs-name">ShortName</span>&gt;</span>Wikipedia<span class="hljs-tag">&lt;/<span class="hljs-name">ShortName</span>&gt;</span>
</code></pre>
<p>When you visit a page that exposes a searchplugin, like Wikipedia, Firefox checks if you already have one installed with the same <code>shortName</code>: if you don&#x2019;t, the UI will suggest you to install it by displaying a small green + sign on the magnifying glass icon in the search bar. To avoid this, the searchplugin shipping in Firefox needs to match the shortName of the searchplugin available from Wikipedia. Visit <a href="https://gn.wikipedia.org" target="_blank">https://gn.wikipedia.org</a> and press <code>CTRL+U</code> to view the source code of the page. At the beginning you will find a line looking like this:</p>
<pre><code class="lang-HTML"><span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">&quot;search&quot;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;application/opensearchdescription+xml&quot;</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;/w/opensearch_desc.php&quot;</span> <span class="hljs-attr">title</span>=<span class="hljs-string">&quot;&#x648;&#x6CC;&#x6A9;&#x6CC;&#x67E;&#x6CC;&#x688;&#x6CC;&#x627; (ur)&quot;</span>/&gt;</span>
</code></pre>
<p>The shortName to use in your .xml file is <code>&#x648;&#x6CC;&#x6A9;&#x6CC;&#x67E;&#x6CC;&#x688;&#x6CC;&#x627; (ur)</code>. Copying and pasting RTL languages is particularly tricky.</p>
<h4 id="yahoo">Yahoo</h4>
<p>Unlike Wikipedia, never copy the file from en-US, since Yahoo is the default and has different parameters. When copying the file from another locale, make sure that the domain is the one you want. For example there&#x2019;s <a href="https://es.search.yahoo.com" target="_blank">https://es.search.yahoo.com</a> but also <a href="https://espanol.search.yahoo.com" target="_blank">https://espanol.search.yahoo.com</a> (es-ES versus a more generic Spanish).</p>
<h2 id="creating-a-patch-for-review">Creating a patch for review</h2>
<p>Once files are ready, follow the instructions available in <a href="../../tools/mercurial/creating_mercurial_patch.html">this document</a> to create a patch, submit it for review, and land it.</p>
<h2 id="setting-up-files-for-locales-repository">Setting up files for locale&#x2019;s repository</h2>
<h3 id="regionproperties">region.properties</h3>
<p>region.properties is stored in <code>/browser/chrome/browser-region</code> for Firefox desktop (<code>/mobile/chrome</code> for Firefox for Android), and it contains information about the default searchplugin, searchplugins order, and protocol handlers. You can use these files as a base:</p>
<ul>
<li>For Firefox desktop <a href="files/desktop_region.properties">this region.properties model</a>.</li>
<li>For Firefox for Android <a href="files/mobile_region.properties">this region.properties model</a>.</li>
</ul>
<p>A few tips:</p>
<ul>
<li>The default searchplugins is defined in <code>browser.search.defaultenginename</code>. Unlike <code>list.json</code>, here you need to specify the <code>shortName</code> attribute included in the XML file, not the filename. So, in case of Google, it will be <code>Google</code>, not <code>google</code>.</li>
<li>Make sure to remove non existing searchplugins from <code>search.order</code>.</li>
<li>If you&#x2019;re updating an existing file, make sure to not reset the <code>gecko.handlerService.defaultHandlersVersion</code> key. If, on the other hand, you&#x2019;re adding a new handler, you will have to increment the existing numeric value.</li>
</ul>
<h2 id="creating-a-patch-for-review-locale-repository">Creating a patch for review (locale repository)</h2>
<p>Once files are ready, follow the instructions available in <a href="../../tools/mercurial/creating_mercurial_patch.html">this document</a> to create a patch, submit it for review, and land it.</p>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="../mozilla_org/enable_production.html" class="navigation navigation-prev " aria-label="Previous page: New locales">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="../../tools/pontoon/" class="navigation navigation-next " aria-label="Next page: Pontoon">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Searchplugins","level":"2.6","depth":1,"next":{"title":"Pontoon","level":"3.1","depth":1,"path":"tools/pontoon/README.md","ref":"tools/pontoon/README.md","articles":[{"title":"New project","level":"3.1.1","depth":2,"path":"tools/pontoon/adding_new_project.md","ref":"tools/pontoon/adding_new_project.md","articles":[]},{"title":"New locale","level":"3.1.2","depth":2,"path":"tools/pontoon/adding_new_locale.md","ref":"tools/pontoon/adding_new_locale.md","articles":[]},{"title":"Notifications","level":"3.1.3","depth":2,"path":"tools/pontoon/sending_notifications.md","ref":"tools/pontoon/sending_notifications.md","articles":[]},{"title":"Renaming a localization file","level":"3.1.4","depth":2,"path":"tools/pontoon/renaming_a_file.md","ref":"tools/pontoon/renaming_a_file.md","articles":[]}]},"previous":{"title":"New locales","level":"2.5.4","depth":2,"path":"products/mozilla_org/enable_production.md","ref":"products/mozilla_org/enable_production.md","articles":[]},"dir":"ltr"},"config":{"gitbook":"*","theme":"default","variables":{},"plugins":["-lunr","-search","search-pro"],"pluginsConfig":{"search-pro":{},"highlight":{},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"}},"file":{"path":"products/searchplugins/setup_searchplugins.md","mtime":"2017-09-22T11:05:03.654Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2017-09-22T11:06:05.597Z"},"basePath":"../..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../../gitbook/gitbook.js"></script>
    <script src="../../gitbook/theme.js"></script>
    
        
        <script src="../../gitbook/gitbook-plugin-search-pro/jquery.mark.min.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-search-pro/search.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

